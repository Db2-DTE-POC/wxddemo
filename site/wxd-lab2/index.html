
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.3.1, mkdocs-material-8.3.9">
    
    
      
        <title>Lab 2 - Starting IBM watsonx.data - IBM watsonx.data Lab</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.1d29e8d0.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.cbb835fc.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,300i,400,400i,700,700i%7CIBM+Plex+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"IBM Plex Sans";--md-code-font:"IBM Plex Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="black">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lab-2-starting-ibm-watsonxdata" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="IBM watsonx.data Lab" class="md-header__button md-logo" aria-label="IBM watsonx.data Lab" data-md-component="logo">
      
  <img src="../img/IBM_logo®_rev_RGB.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            IBM watsonx.data Lab
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lab 2 - Starting IBM watsonx.data
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="IBM watsonx.data Lab" class="md-nav__button md-logo" aria-label="IBM watsonx.data Lab" data-md-component="logo">
      
  <img src="../img/IBM_logo®_rev_RGB.png" alt="logo">

    </a>
    IBM watsonx.data Lab
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../wxd-intro/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Accessing IBM watsonx.data
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Accessing IBM watsonx.data" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Accessing IBM watsonx.data
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-techzone/" class="md-nav__link">
        TechZone image
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-vmware/" class="md-nav__link">
        Local VMWare image
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../wxd-startwatsonx/" class="md-nav__link">
        Start IBM watsonx.data
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Introduction
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Introduction" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Introduction
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-prestocli/" class="md-nav__link">
        Presto CLI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-watsonui/" class="md-nav__link">
        IBM watsonx.data UI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-presto/" class="md-nav__link">
        Presto UI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-minio/" class="md-nav__link">
        MinIO UI
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-dbeaver/" class="md-nav__link">
        dBeaver
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Presto SQL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Presto SQL" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Presto SQL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-analytics/" class="md-nav__link">
        Analytic Workloads
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-advanced/" class="md-nav__link">
        Advanced Functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-timetravel/" class="md-nav__link">
        Time Travel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-federation/" class="md-nav__link">
        Federation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-superset/" class="md-nav__link">
        Apache Superset
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../wxd-objectstore/" class="md-nav__link">
        Working with Object Store Buckets
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../wxd-ingest/" class="md-nav__link">
        Ingesting Data
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../wxd-troubleshooting/" class="md-nav__link">
        Troubleshooting
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          Appendix
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Appendix" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Appendix
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-disclaimer/" class="md-nav__link">
        Disclaimer
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-revisions/" class="md-nav__link">
        Revisions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../wxd-acknowledgements/" class="md-nav__link">
        Acknowledgements
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#lab-instructions" class="md-nav__link">
    Lab Instructions
  </a>
  
    <nav class="md-nav" aria-label="Lab Instructions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-ibm-watsonxdata-developer-edition" class="md-nav__link">
    Start IBM watsonx.data Developer Edition
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-status-of-ibm-watsonxdata" class="md-nav__link">
    Check status of IBM watsonx.data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#validate-the-developer-installation" class="md-nav__link">
    Validate the Developer Installation
  </a>
  
    <nav class="md-nav" aria-label="Validate the Developer Installation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#presto-engine-test" class="md-nav__link">
    Presto Engine Test
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ibm-watsonxdata-ui" class="md-nav__link">
    IBM watsonx.data UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#presto-ui" class="md-nav__link">
    Presto UI
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dbeaver-client-tool" class="md-nav__link">
    dBeaver Client Tool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieve-ssl-certificates" class="md-nav__link">
    Retrieve SSL Certificates
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-dbeaver-locally" class="md-nav__link">
    Start dBeaver Locally
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-ibm-watsonxdata-connection-from-dbeaver" class="md-nav__link">
    Setup IBM watsonx.data connection from dBeaver
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#local-dbeaver-access" class="md-nav__link">
    Local dBeaver Access
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="lab-2-starting-ibm-watsonxdata">Lab 2 - Starting IBM watsonx.data</h1>
<p>The Developer package is meant to be used on single nodes. While it uses the same code base, there are some restrictions, especially on scale. In this lab, we will open some additional ports as well to understand how everything works. We will also use additional utilities to illustrate connectivity and what makes the IBM watsonx.data “open”. </p>
<h2 id="lab-instructions">Lab Instructions</h2>
<p>Throughout the labs, any command that needs to be executed will be highlighted in a grey box:</p>
<pre><code class="language-bash">cd /root/ibm-lh-dev/bin
</code></pre>
<p>Copy the text that is found within the box and paste it into the command window to execute. Note that some commands may span multiple lines, so make sure you copy everything in the box. Depending on your browser, you may see a copy icon on the far right side of the command.</p>
<h3 id="start-ibm-watsonxdata-developer-edition">Start IBM watsonx.data Developer Edition</h3>
<p>Make sure you are root and that you are in the development code bin directory.</p>
<pre><code>cd /root/ibm-lh-dev/bin
</code></pre>
<p>Once you have switched to the development directory, you can start the IBM watsonx.data system. The <tt>LH_RUN_MODE</mark> flag is used to allow for non-SSL ports to be used in our development environment.
<code class="language-bash"><pre>
export LH_RUN_MODE=diag
./start.sh 
</pre></code></p>
<p>The output will be like:</p>
<pre style="font-size: small; color: green">
using /root/ibm-lh-dev/localstorage/volumes as data root directory for user: root/1001 
infra config location is /root/ibm-lh-dev/localstorage/volumes/infra

-- starting data plane containers...

==== starting: ibm-lh-minio ==== 
468339b93d94c78c1bb9bdcfe7f20ef0cc8d6c09725768847474b13bb51048e4
==== starting: ibm-lh-postgres ==== 
063643caeccd86f0612dbf587919f9b1c1681ab0e6632f04c7cd00bbd8f67596
==== starting: lh-hive-metastore ==== 
3d4ff7fb304fa4513642e289c290e3423827eef732d774c3be4229fe51601a9d
==== starting: ibm-lh-presto ==== 
3cc4313e53a784daf8b7747696bcd0260fe22d6abbaf8d749e50509d961066af

-- starting control plane containers...

==== starting: ibm-lh-control-plane-prereq ==== 
creating (if needed) db ibm_lh_repo
exists result: 
CREATE DATABASE
creating if needed, meta-repo tables in ibm_lh_repo
CREATE TABLE
CREATE TABLE
CREATE TABLE
CREATE TABLE
creating (if needed) db lakehouse-log
exists result: 
CREATE DATABASE
creating if needed, meta-repo tables in lakehouse-log
CREATE TABLE
==== starting: lhconsole-api ==== 
12fc73711934100cde1f6d4e633c28e2da0b9f4a804fe8923375669fcfeeb023
==== starting: lhconsole-javaapi ==== 
2c391fdcb68177346e6c73a26710da6101b9c19f52fa2ca2633a91bfcb95ae4c
==== starting: lhconsole-nodeclient ==== 
eca661eba3ba2fbef620438fe7986ebceb50c738bfdc0f08aeb3052e2560c8cb
==== starting: lhconsole-ui ==== 
efc6d69b051200ec85c2efd43dd884ec3a2e45304131065d1d7c09f3af464788
</pre>

<h3 id="check-status-of-ibm-watsonxdata">Check status of IBM watsonx.data</h3>
<p>One the system has started; you can check the status with the following command.</p>
<pre><code class="language-bash">./status.sh --all
</code></pre>
<p>Output will look like:</p>
<pre style="font-size: small; color: green">
using /root/ibm-lh-dev/localstorage/volumes as data root directory for user: root/1001 
infra config location is /root/ibm-lh-dev/localstorage/volumes/infra
lhconsole-ui                running         0.0.0.0:9443->8443/tcp, :::9443->8443/tcp
lhconsole-nodeclient-svc        running         3001/tcp
lhconsole-javaapi-svc           running         8090/tcp
lhconsole-api               running         3333/tcp, 8081/tcp
ibm-lh-presto               running         0.0.0.0:8443->8443/tcp, :::8443->8443/tcp
ibm-lh-hive-metastore           running         
ibm-lh-postgres             running         5432/tcp
ibm-lh-minio                running         
</pre>

<h2 id="validate-the-developer-installation">Validate the Developer Installation</h2>
<p>To confirm that the software is working, run the following commands to validate the installation.</p>
<h3 id="presto-engine-test">Presto Engine Test</h3>
<p>Check the Presto engine by connecting to a schema. First, we need to make sure that the Presto engine has completed all startup tasks.</p>
<pre><code>./checkpresto.sh
</code></pre>
<pre style="font-size: small; color: green">
Waiting for Presto to start.
...........................
Ready
</pre>

<p><strong>Note</strong>: If the starting message appears to take too long (fills up the line with dots), kill the command (CTRL-C) and restart the IBM watsonx.data image (this rare event occurs because of resource contention in our small machine). </p>
<p>To restart the image, issue the following commands.</p>
<pre><code>export LH_RUN_MODE=diag
./stop.sh
./start.sh
./checkpresto.sh
</code></pre>
<p>Once the command returns "Ready" you can connect to the presto CLI.</p>
<pre><code>./presto-cli.sh --catalog tpch --schema tiny
</code></pre>
<p>Check the record count of the customer table. </p>
<p><strong>Note</strong>: If the Presto engine has not yet started (you didn't run the checkpresto script), the next command may result in a useless Java error message. You may need to wait for a minute for attempting to run the statement again.</p>
<pre><code>select * from customer limit 10;
</code></pre>
<p>Quit the Presto CLI. The Presto quit command can be used with or without a semicolon.</p>
<pre><code>quit;
</code></pre>
<h3 id="ibm-watsonxdata-ui">IBM watsonx.data UI</h3>
<p>Open your browser and navigate to:</p>
<ul>
<li>IBM watsonx.data UI - https://ussouth.techzone-services.com:xxxxx</li>
<li>VMWare Image - https://localhost:9443/</li>
<li>Credentials: username: <mark>ibmlhadmin</mark> password: <mark>password</mark></li>
</ul>
<p>Note: You will get a Certificate error in Firefox:</p>
<p><img alt="Browser" src="../wxd-images/browser-warning-1.png" /></p>
<p>Select Advanced.</p>
<p><img alt="Browser" src="../wxd-images/browser-warning-2.png" /></p>
<p>Choose “Accept the Risk and Continue”. If you are using Google Chrome, you can bypass the error message by typing in “thisisunsafe”. </p>
<p><img alt="Browser" src="../wxd-images/watsonx-data-ui.png" />  </p>
<p><strong>Note</strong>: If you see the following screen when first connecting to the UX, this is an indication that the service has not completely initialized.</p>
<p><img alt="Browser" src="../wxd-images/watsonx-data-ui-failure.png" /></p>
<p>Dismiss all the error messages and then click on the Person icon (far right side above the messages) and Logout. Close the browser window after logging out and open the web page again until you get the proper login screen. At this point you will be connected to the console.
 </p>
<h3 id="presto-ui">Presto UI</h3>
<p>Presto includes a browser interface. The PrestoDB console UI can be accessed from:</p>
<ul>
<li>Presto console - http://ussouth.techzone-services.com:xxxxx</li>
<li>VMWare Image - http://localhost:8080/ui</li>
<li>Credentials: userid: None required</li>
</ul>
<p><img alt="Browser" src="../wxd-images/presto-ui.png" /> <br />
</p>
<h3 id="dbeaver-client-tool">dBeaver Client Tool</h3>
<p>This is a client tool that we can use to connect to the IBM watsonx.data and execute queries etc. The tool has been installed in the watsonx users home directory. To access dBeaver, you must use one of the following options:</p>
<ul>
<li>Use the Techzone guacamole interface and connect to the virtual machine console and deal with the pain and agony of using a non-resizable window.</li>
<li>Use the VNC service which has been installed on this server for you.</li>
<li>Use the native Linux Gnome terminal with VMWare/VirtualBox</li>
</ul>
<h3 id="retrieve-ssl-certificates">Retrieve SSL Certificates</h3>
<p>Make sure you are still connected as root in your terminal session. We need to copy some keystore data into a temporary location to use with dBeaver connectivity. Make sure you are connected as root in a terminal session.</p>
<p><strong>Note</strong>: We need two certificates from Presto to use with other query products (i.e., Apache Superset).</p>
<pre><code>docker cp ibm-lh-presto:/mnt/infra/tls/lh-ssl-ts.jks /tmp/lh-ssl-ts.jks
docker cp ibm-lh-presto:/mnt/infra/tls/cert.crt /tmp/lh-ssl-ts.crt
</code></pre>
<h3 id="start-dbeaver-locally">Start dBeaver Locally</h3>
<p>To start dBeaver, you must be connected to the console of the Linux server as the watsonx user. You can either use the VNC interface or the local terminal UI of Linux. Open a new terminal window inside the virtual machine and run the following command.</p>
<pre><code>./dbeaver/dbeaver
</code></pre>
<p>The start-up screen for dBeaver will display.</p>
<p><img alt="Browser" src="../wxd-images/dbeaver-startup.png" /> </p>
<p>The dBeaver may ask if you want to create an empty database or update the release. Just say No.</p>
<p>The first dialog from dBeaver will ask you to create a database connection.</p>
<p><img alt="Browser" src="../wxd-images/dbeaver-connection.png" /></p>
<p>If you do not see this screen, select Database, and then select New Database Connection:</p>
<h3 id="setup-ibm-watsonxdata-connection-from-dbeaver">Setup IBM watsonx.data connection from dBeaver</h3>
<p>We will use the PrestoDB JDBC connector (NOT PrestoSQL). This is the other name for Trino, a variant of PrestoDB which might work. Select SQL (see Left side) and scroll down until you see PrestoDB. </p>
<p>Select PrestoDB and then press “Next”. The following screen will be displayed.</p>
<p>Enter the following values into the dialog. 
<strong>Note</strong>: These settings are case sensitive.</p>
<pre><code>Host=localhost
Port=8443
Username=ibmlhadmin
Password=password
Database=tpch
</code></pre>
<p>Then select the Driver Properties tab. You will be asked to download the database driver.</p>
<p>Make sure select “Force Download” otherwise it will not properly download the driver. Once downloaded it will display the Driver properties dialog.</p>
<p>Press the [+] button on the bottom left of the User Properties list.</p>
<p>You need to enter two properties:</p>
<ul>
<li>SSL True</li>
<li>SSLKeyStorePath /tmp/lh-ssl-ts.jks</li>
</ul>
<p>Enter the property name “SSL”, in uppercase (the parameter is case sensitive!). When you hit OK it will display the setting in the list.</p>
<p>Click on the SSL field and you will update the value to True and hit Enter.
Add another field called SSLKeyStorePath and give it value of /tmp/lh-ssl-ts.jks. The panel should now contain two values.</p>
<p>Press Finish when done. You should now see the TPCH database on the left panel.</p>
<p>Clicking on the &gt;TPCH line should display the tables that are found in the database.</p>
<p>You can now use dBeaver to navigate through the different schemas in the Presto database.</p>
<h2 id="local-dbeaver-access">Local dBeaver Access</h2>
<p>If you want to use a local copy of dBeaver, you will need to make some changes to your local system and the IBM watsonx.data system to connect. The instructions in the previous section require some slight modifications.</p>
<p>First locate the Presto connection port in your reservation document.</p>
<ul>
<li>Presto Port - Server: eu-de.techzone-services.com Port: 35752</li>
</ul>
<p>In a terminal window on your local machine, issue the following command to determine the IP address of your TechZone server.</p>
<pre><code>ping eu-de.techzone-services.com
</code></pre>
<p><tt fontsize=6>
PING eu-de.techzone-services.com (149.81.9.250): 56 data bytes
64 bytes from 149.81.9.250: icmp_seq=0 ttl=52 time=157.459 ms
</mark>
Note: Your server will be different! The FRA04 server is shown above.</p>
<p>This IP address needs to be placed into your local hosts file. On OSX, use the following command with the IP address found above.</p>
<pre><code>echo '149.81.9.250 ibm-lh-presto-svc' | sudo tee -a /etc/hosts
</code></pre>
<p>In a terminal window on the IBM watsonx.data server, issue the following commands:</p>
<pre><code>sudo firewall-cmd --add-port={8443/tcp,5432/tcp} --permanent --zone=public
sudo firewall-cmd --reload
</code></pre>
<p>In your connection properties in dBeaver, use the following values:</p>
<pre><code>Host=ibm-lh-presto-svc
Port=8443
Username=ibmlhadmin
Password=password
Database=tpch
</code></pre>
<p>And remember to add these connection properties.</p>
<ul>
<li>SSL True</li>
<li>SSLKeyStorePath /tmp/lh-ssl-ts.jks</li>
</ul>
<p>You should now be able to connect to the Presto engine using your local dBeaver software.</p>

              
            </article>
            
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 IBM
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.b97dbffb.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.6c7ad80a.min.js"></script>
      
    
  </body>
</html>